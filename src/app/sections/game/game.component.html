<h1 class="text-center text-xl font-bold">
  Game Exploration
</h1>

<div class="flex flex-col items-center gap-8">
  <div class="flex w-fit mt-8 mx-auto">
    
    <div
      id="game-grid"

      class="
        grid
        border-4 border-toolbar-border-color
        rounded-l-sm rounded-br-sm
      "
      [style]="`
        grid-template-rows: repeat(${xn}, minmax(0, 1fr));
        grid-template-columns: repeat(${yn}, minmax(0, 1fr));
      `"
    >
      @for (rows of cells; track $index; let i = $index) {
        @for (cell of rows; track $index; let j = $index) {
          <div 
            class="
              relative 
              outline-1 outline-content-border-color
              z-10
            "
          >
            <cell
              [(state)]="cells[i][j]" 
              (onClick)="onCellClick(i,j)"
              (onFlagged)="onFlagCell(i,j)"
            />
          </div>
        }
      }
    </div>
    <div 
      class="
        flex flex-col gap-4
        h-fit
        p-4 pl-8
        rounded-r-lg
        bg-content-hover-background
        border-4 border-l-0 border-toolbar-border-color
      "
    >
      <div class="flex gap-2">
        <div class="flex flex-col gap-2">
          <label for="xn" class="text-xs">X</label>
          <p-inputnumber id="xn" [(ngModel)]="xn" />
        </div>
  
        <div class="flex flex-col gap-2">
          <label for="yn" class="text-xs">Y</label>
          <p-inputnumber id="yn" [(ngModel)]="yn" />
        </div>
      </div>

      <div class="flex flex-col gap-2">
        <label for="mines" class="text-xs">Mines</label>
        <p-inputnumber id="mines" [(ngModel)]="mines" />
      </div>

      <div class="flex gap-2">
        <p-button
          size="small" 
          label="Reset"
          (onClick)="onReset()"
          [disabled]="isBusy()"
        ></p-button>
  
        <p-button
          size="small" 
          label="Solve"
          (onClick)="autoSolve()"
          [disabled]="gameFinished() || isBusy()"
        ></p-button>
      </div>

    </div>
  </div>
</div>